name: Quality Check
on: [push, pull_request]

jobs:
  quality:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Set up Java
        uses: actions/setup-java@v4
        with:
          java-version: '22'
          distribution: 'temurin'
      
      - name: Run quality checks
        working-directory: ./app
        run: |
          chmod +x gradlew
          ./gradlew checkstyleMain pmdMain test
          
      - name: Create simple badges
        run: |
          echo "## ðŸ“Š Quality Status" > BADGES.md
          echo "![Tests](https://img.shields.io/badge/tests-passing-success)" >> BADGES.md
          echo "![Checkstyle](https://img.shields.io/badge/checkstyle-enabled-blue)" >> BADGES.md
          echo "![PMD](https://img.shields.io/badge/PMD-enabled-blue)" >> BADGES.md
          echo "![Java](https://img.shields.io/badge/Java-22-blue)" >> BADGES.md